<div data-controller="open-calendar">
  <h1>Requests</h1>


  <%# simple_form_for :query, url: requests_path, method: :get, class: "d-flex" do |f| %>
    <%# f.input :start_time %>
    <%# f.input :end_time %>
    <%# f.submit "Search" %>
  <%# end %>


 



  <div class="container">
    <div class="request_card">
      <div>
        <% @requests.each do |request| %>
          <p> Per√≠odo: <%= l request.start_time, format: :short %> a <%= l request.end_time, format: :short %> </p>
          <p> <%= request.request_type %> </p>
          <p> <%= request.origin %> <i class="fa-solid fa-arrow-right"></i> <%= request.destination %> </p>
          <p> Pedido criado em <%= request.created_at %> </p>
          <p> <%= request.available %> </p>
          <div class="btn btn-primary">
            <%= link_to "New request", new_request_path, :class => "btn" if policy(Request).new? %>
          </div>
          <!-- Button trigger modal -->
          <button type="button" class="btn btn-primary" data-action="click->open-calendar#open" data-open-calendar-id-param='<%= request.id %>'>
            Launch demo modal
          </button> 
        <% end %>
      </div>

      <label class="btn avatar-photo">
        <% if current_user.avatar.attached? %>
          <%= cl_image_tag current_user.avatar.key %>
        <% else %>
          <%= image_tag "https://randomuser.me/api/portraits/women/49.jpg"%>
        <% end %>
      </label>
      <div>
        <% @requests.each do |request| %>
        <p> <i class="fa-solid fa-user"></i> <%= request.user.first_name %><%= request.user.last_name %> </p>
        <% end %>
      </div>
    </div>
  </div>

<!-- Modal -->
  <div class="modal modal-lg fade" data-open-calendar-target='modal' tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body" data-open-calendar-target='modalBody'>
          
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div>
    </div>
  </div>

</div>

